<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, viewport-fit=cover">
  <title>휴매니존</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/modal.css">
  <link rel="stylesheet" href="../css/check.css">
  <link rel="stylesheet" href="../css/booking/booking.css">


  <script src="../js/jquery-1.12.4.min.js"></script>
  <script src="../js/modal.js"></script>

</head>
<body>
    <div class="goback_area">
        <div class="goback sprite md_open_btn" aria-haspopup="dialog" title="대화상자" data-href="#modal8"></div>
        <p>날짜선택</p>
    </div>
    <div class="wrap">
        <div class="progress_bar">
            <div class="bar_green"></div>
        </div>
        <h3 class="tit2">나의 나눔돌봄 요청<br><span>날짜 선택하기</span></h3>


       
    <div class = "calendar_container"> 

        <button class = "left_button"> &lt </button>
        
        <table class = "calendar">
            <th class = "title">2월</th>
            <tbody>
                <tr class = "week">
                    <td class = "day">일</td>
                    <td class = "day">월</td>
                    <td class = "day">화</td>
                    <td class = "day">수</td>
                    <td class = "day">목</td>
                    <td class = "day">금</td>
                    <td class = "day">토</td>
                </tr>
                <tr>    <!-- 달력 첫 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
                <tr>    <!-- 달력 두 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
                <tr>    <!-- 달력 세 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
                <tr>    <!-- 달력 네 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
                <tr>    <!-- 달력 다섯 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
                <tr>    <!-- 달력 여섯 번째 줄-->
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                    <td class = "calendar_days" roll = "button"> </td>
                </tr>
            </tbody>
        </table>

      

        
        <button class = "right_button"> > </button>
    </div>


    <button type="button" class="btn_green wid100">다음</button>

    <div class="md_cnt" id="modal8" role="dialog" aria-modal="true" aria-labelledby="mdTit8">
        <p class="mdTit8">작성된 내용을 취소하시겠습니까?<br>
            취소하시면 작성하신 정보가 저장되지 않습니다.
        </p>
        <div class="btn_wrap"> 
            <button type="button">계속하기</button>
            <button type="button" class="md_close_btn" data-link="last">취소</button>
        </div>
    </div>

   
</body>
<script>
    const calendarDays = document.querySelectorAll(".calendar_days"),
    calendarTitle = document.querySelector(".title"),
    leftButton = document.querySelector(".left_button"),
    rightButton = document.querySelector(".right_button"),
    calendar = document.querySelector(".calendar");
    // dateUpdate = document.querySelector(".date_update");


      class Calendar {
          constructor(year, month) {
          this.today = new Date(year, month);
          this.year = this.today.getFullYear(),
          this.month = this.today.getMonth(),
          this.date = this.today.getDate(),
          this.day = this.today.getDay()
      }


      getFirstDay() {
          const firstDate = new Date(this.year, this.month);
          return firstDate.getDay();
      }

      getLastDay() {
          let wholeDays = [];
          
          if ((this.year % 4 === 0 && this.year % 100 !== 0) || (this.year % 400 === 0)) {
              wholeDays = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
          } else {
              wholeDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
          }
          return wholeDays[this.month];
      }

      fillCalendar() {
          this.initCalendar();
          calendarTitle.innerHTML = `${this.year}. ${this.month + 1 }`
          const firstDay = this.getFirstDay();
          const lastDay = this.getLastDay();
          let day = 1;
          for (let i = firstDay; i < calendarDays.length; i++) {
              if (day <= lastDay) {
                  calendarDays[i].innerHTML = `<button class = "day_button">${day}</button>`;
                  day++;
              }

          }
      }

      initCalendar() {
          calendarDays.forEach((e) => {
              e.innerHTML = "";
          });
      }


      drawCalendar() {
          let change = 0;
          const today = new Date();
          let calendarInstance = new Calendar(today.getFullYear(), today.getMonth() + change);

          calendarInstance.fillCalendar();

          leftButton.addEventListener("click", (e) => {
              change--;
              calendarInstance = new Calendar(today.getFullYear(), today.getMonth() + change);
              calendarInstance.fillCalendar();
              this.updateCalendarStyle();
          });
          rightButton.addEventListener("click", (e) => {
              change++;
              calendarInstance = new Calendar(today.getFullYear(), today.getMonth() + change);
              calendarInstance.fillCalendar();
              this.updateCalendarStyle();
          });
      }



      handleEvents() {
          this.drawCalendar();
      }

  }


  const cal = new Calendar();
  cal.handleEvents();


  $(document).ready(function () {
      $('.calendar_days').click(function () {
        if($(this).children().hasClass('day_selected')){
                $(this).children().removeClass('day_selected');
            }else{
                $(this).children().addClass('day_selected');
                $('.btn_green').css('background-color','#9AC31C');
            }
          const length = $('.day_selected').length;
          console.log(length);
          if(length > 10){
            $(this).children().removeClass('day_selected');
          }else if(length <= 0 ){
            $('.btn_green').removeAttr('style');
          }
      });
  });
</script>



</html>  